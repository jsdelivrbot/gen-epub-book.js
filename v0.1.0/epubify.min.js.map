{"version":3,"sources":["dist/bundle/epubify.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","process","Object","defineProperty","value","Configuration","undefined","_util","_classCallCheck","instance","Constructor","TypeError","path","HELP_TEXT","argv","out","arguments","console","this","file_exists","print_help","exitCode","in_file","out_file","rel_root","dirname","err","error","log","./util","_process","2","parse_file","contents","3","fs","accessSync","_","4","5","normalizeArray","parts","allowAboveRoot","up","last","splice","unshift","splitPathRe","splitPath","filename","exec","slice","resolve","resolvedPath","resolvedAbsolute","cwd","charAt","filter","split","p","join","normalize","isAbsolute","trailingSlash","substr","paths","Array","prototype","index","relative","from","to","trim","arr","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","push","concat","sep","delimiter","result","root","dir","basename","ext","extname","xs","res","str","len","6","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","setTimeout","clearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","timeout","run","nextTick","args","Item","array","apply","title","browser","env","version","versions","noop","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","chdir","umask"],"mappings":"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"}